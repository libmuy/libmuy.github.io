<!DOCTYPE html>
<html>

<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    
    <meta charset="utf-8">
    
    <link rel="shortcut icon" href="/assets/images/logo_black_small.png">
    <link rel="icon" href="/assets/images/logo_black_small.png">
    <link rel="stylesheet" href="/assets/prism/prism.css">
    <link rel="stylesheet" href="/assets/css/style.css">

    <script src="/assets/prism/prism.js"></script>

    <script src="https://kit.fontawesome.com/45a69050db.js" crossorigin="anonymous"></script>

    <!-- Begin Jekyll SEO tag v2.7.1 -->
<title>rbenvよりRubyとJekyllのインストール（Linux） | Libmuy’s Blog</title>
<meta name="generator" content="Jekyll v4.2.1">
<meta property="og:title" content="rbenvよりRubyとJekyllのインストール（Linux）">
<meta name="author" content="Libmuy">
<meta property="og:locale" content="ja_JP">
<meta name="description" content="Jekyllを使うための事前作業のインストールの手順メモです。 OSのパッケージ管理ソフトでインストールすると、いろいろバージョン問題が出たときのバージョン切替が難しくなるので、 手動インストールをお勧め。">
<meta property="og:description" content="Jekyllを使うための事前作業のインストールの手順メモです。 OSのパッケージ管理ソフトでインストールすると、いろいろバージョン問題が出たときのバージョン切替が難しくなるので、 手動インストールをお勧め。">
<link rel="canonical" href="https://libmuy.github.io/web/Ruby-Jekyll-install.html">
<meta property="og:url" content="https://libmuy.github.io/web/Ruby-Jekyll-install.html">
<meta property="og:site_name" content="Libmuy’s Blog">
<meta property="og:image" content="https://libmuy.github.io/assets/images/2021-09-26-Ruby-Jekyll-install_rbenv.jpg">
<meta property="og:type" content="article">
<meta property="article:published_time" content="2021-09-26T00:00:00+09:00">
<meta name="twitter:card" content="summary">
<meta property="twitter:image" content="https://libmuy.github.io/assets/images/2021-09-26-Ruby-Jekyll-install_rbenv.jpg">
<meta property="twitter:title" content="rbenvよりRubyとJekyllのインストール（Linux）">
<meta name="twitter:site" content="@libmuy">
<meta name="twitter:creator" content="@Libmuy">
<meta property="fb:admins" content="libmuy">
<meta property="article:publisher" content="libmuy">
<script type="application/ld+json">
{"datePublished":"2021-09-26T00:00:00+09:00","description":"Jekyllを使うための事前作業のインストールの手順メモです。 OSのパッケージ管理ソフトでインストールすると、いろいろバージョン問題が出たときのバージョン切替が難しくなるので、 手動インストールをお勧め。","mainEntityOfPage":{"@type":"WebPage","@id":"https://libmuy.github.io/web/Ruby-Jekyll-install.html"},"url":"https://libmuy.github.io/web/Ruby-Jekyll-install.html","@type":"BlogPosting","author":{"@type":"Person","name":"Libmuy"},"publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"https://libmuy.github.io/assets/images/logo_black_small.png"},"name":"Libmuy"},"image":"https://libmuy.github.io/assets/images/2021-09-26-Ruby-Jekyll-install_rbenv.jpg","headline":"rbenvよりRubyとJekyllのインストール（Linux）","dateModified":"2021-09-26T00:00:00+09:00","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->


</head>

<body class="index">
    

    <nav>
    <a href="/">
        <img src="/assets/images/logo.svg">
        <span>LIBMUY</span>
    </a>

    <div class="menu">
        <div class="bar bar1"></div>
        <div class="bar bar2"></div>
        <div class="bar bar3"></div>
    </div>

</nav>

    <div class="container">
        <header id="header">
    <div id="head-in">
        <div id="sitename">
            <a href="/" itemprop="url"><img src="/assets/images/logo.svg" alt="" width="150" height="150" class="onepoint" itemprop="image" sizes="(max-width: 150px) 100vw, 150px">
                <span itemprop="name about">LIBMUY</span>
            </a>
        </div>
        </div>
        <div class="search-container">
            <form novalidate="novalidate" onsubmit="return false;" class="searchbox">
    <div role="search" class="search-wrapper1">
        <span class="search-wrapper2">
            <input type="search" placeholder="Search the docs" required="required" class="search-input">
            <span class="ds-dropdown-menu" role="listbox" id="search-suggestion-container">
            </span>
        </span>
        <button type="submit" title="Submit your search query." class="search-submit-button">
            <svg width="12" height="12" role="img" aria-label="Search">
                <use xlink:href="/assets/images/search-icon.svg#search"></use>
            </svg>
        </button>
        <button id="clear-btn" type="reset" title="Clear the search query." class="search-reset-button">
            <svg width="12" height="12" role="img" aria-label="Reset">
                <use xlink:href="/assets/images/search-icon.svg#reset"></use>
            </svg>
        </button>
    </div>
</form>

<script src="https://cdn.jsdelivr.net/npm/instantsearch.js@2.6.0/dist/instantsearch.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.20.1/moment.min.js"></script>

<script>
    const search = instantsearch({
        appId: 'BYSJ0BMMUA',
        apiKey: '532e9a5e639b4c7b0de3ca2e25df117a',
        indexName: 'blog'
    });

    const hitTemplate = function (hit) {
        console.log("hitTemplate: hit:" + hit);
        /* no display when no inputing */
        if (hit._highlightResult == null || hit._highlightResult.content.matchedWords.length <= 0) {
            return "";
        }

        let date = '';
        if (hit.date) {
            date = moment.unix(hit.date).format('MMM D, YYYY');
        }
        let url = hit.url;
        if (!(hit.anchor == null)) {
            url += `#${hit.anchor}`;
        }
        const title = hit._highlightResult.title.value;

        let categories = '';
        if (hit.category_name) {
            categories = hit.category_name.split("/").map(match => {
                return `<span class="post-breadcrumb">${match}</span>`
            }).join(' > ')
        }
        const content = hit._highlightResult.content.value;

        return `
  <div class="ds-suggestion" role="option">
    <a class="search-suggestion search-suggestion-secondary" aria-label="Link to the result" href="${url}">
        <div class="search-suggestion-wrapper">
            <div class="search-suggestion-subcategory-column">
                <span class="search-suggestion-subcategory-column-text">${categories}</span>
            </div>
            <div class="search-suggestion-content">
                <div class="search-suggestion-title">
                    ${date}<span class="aa-suggestion-title-separator" aria-hidden="true"> › </span>
                    ${title}
                </div>
                <div class="search-suggestion-text">
                    ${content}
                </div>
            </div>
        </div>
    </a>
</div>`;
    }

    // Create a render function
    var suggestion = document.querySelector('#search-suggestion-container');
    var clrBtn = document.querySelector('#clear-btn');
    const renderSearchBox = (renderOptions, isFirstRender) => {
        const { query, refine, clear, isSearchStalled, widgetParams } = renderOptions;
        var removeSuggestionTimer;

        console.log("renderSearchBox: firstRender:" + isFirstRender + ", isSearchStalled:" + isSearchStalled + ", query:" + query);
        if (isFirstRender) {
            var input = document.querySelector('.search-input');
            input.addEventListener('input', event => {
                refine(event.target.value);
            });
            input.addEventListener('focusout', (event) => {
                removeSuggestionTimer = setTimeout(function () {
                    suggestion.style.display = 'none';
                }, 300);
            });

            suggestion.addEventListener('click', () => {
                console.log("suggestion event:click");
                clearTimeout(removeSuggestionTimer);
            });
            suggestion.addEventListener('contextmenu', () => {
                console.log("suggestion event:right click");
                clearTimeout(removeSuggestionTimer);
            });

            clrBtn.addEventListener('click', () => {
                clear();
            });

        }
        if (query.length > 0) {
            suggestion.style.display = 'block';
            clrBtn.style.display = 'block';
        } else {
            suggestion.style.display = 'none';
            clrBtn.style.display = 'none';
        }

        document.querySelector('input').value = query;
        document.querySelector('#clear-btn').hidden = !isSearchStalled;
    };

    // create custom widget
    const customSearchBox = instantsearch.connectors.connectSearchBox(
        renderSearchBox
    );

    // instantiate custom widget
    search.addWidgets([
        customSearchBox({
            container: document.querySelector('.searchbox'),
        })
    ]);

    search.addWidget(
        instantsearch.widgets.hits({
            container: '#search-suggestion-container',
            templates: {
                item: hitTemplate
            },
            cssClasses: {
                root: 'ds-dataset',
                emptyRoot: 'ds-dataset-empty',
                list: 'ds-suggestions',
                item: 'ds-suggestions',
            }
        })
    );

    search.on('render', () => {
        console.log("rendered");
        var dataset = suggestion.getElementsByClassName('ds-dataset');
        if (dataset.length == 0) return;
        dataset = dataset[0];
        var logodiv = document.getElementById("search-logo");
        if (!(logodiv == null)) return;

        let parser = new DOMParser()
        let doc = parser.parseFromString(`
        <div id="search-logo" class="ds-suggestions">
            <svg width="12" height="12" role="img" aria-label="Logo">
                <use xlink:href="/assets/images/search-icon.svg#logo"></use>
            </svg>
        </div>
        `, "text/html")

        logodiv = doc.getElementById("search-logo");
        dataset.appendChild(logodiv);
    });

    search.start();
</script>
        </div>
</header>
        <link rel="stylesheet" href="/assets/css/post.css">

<div id="primary" class="clearfix">
    <div id="left-side">
    <div id="side-fixed">
        <div class="title">目次</div>
        <ol id="" class="toc_list">
<li class=" toc-h1"><a href="#rbenv%E3%81%AE%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB">rbenvのインストール</a></li>
<li class=" toc-h1"><a href="#ruby%E3%82%92%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB">Rubyをインストール</a></li>
<li class=" toc-h1"><a href="#bundler%E3%81%A8jekyll%E3%82%92%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB">bundlerとJekyllをインストール</a></li>
<li class=" toc-h1">
<a href="#%E3%81%9D%E3%81%AE%E4%BB%96">その他</a>
<ol>
<li class=" toc-h2"><a href="#rbenv%E3%82%92%E4%BD%BF%E3%81%A3%E3%81%9F%E7%90%86%E7%94%B1">rbenvを使った理由</a></li>
</ol>
</li>
</ol>
    </div>
</div>
<!--/#right-side-->
    <main id="main">
        <article>
            <div id="core" class="grid">
                <div itemprop="mainEntityOfPage" id="mainEntity" class="post post-109 type-post status-publish format-standard has-post-thumbnail hentry category-server tag-debian tag-linux tag-omv tag-openmediavault tag-server tag-wordpress ja">
                    <div id="article-header">
                        <h1 class="entry-title" itemprop="headline name">rbenvよりRubyとJekyllのインストール（Linux）</h1>
                    </div>
                    <div class="clearfix">
                        <p class="meta">
                            <i class="far fa-clock"></i>
                            <span class="date published">
                                <time class="entry-date updated" datetime="2021-09-26T00:00:00+09:00" itemprop="datePublished">
                                    26 Sep 2021
                                </time>
                            </span>
                            <i class="fas fa-redo-alt"></i>
                            <span class="date">
                                <meta itemprop="dateModified" content="2021-09-30T00:23:19+09:00">
                                30 Sep 2021
                            </span>
                        </p>

                        
                        <div class="cover">
                            <img src="/assets/images/2021-09-26-Ruby-Jekyll-install_rbenv.jpg">
                        </div>
                        

                        <div id="toc_container">
<span class="toc_title">Contents</span><input id="toc_toggle" type="checkbox" checked><label class="toc_toggle" for="toc_toggle"></label>
                            <ol id="" class="toc_list">
<li class=" toc-h1"><a href="#rbenv%E3%81%AE%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB">rbenvのインストール</a></li>
<li class=" toc-h1"><a href="#ruby%E3%82%92%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB">Rubyをインストール</a></li>
<li class=" toc-h1"><a href="#bundler%E3%81%A8jekyll%E3%82%92%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB">bundlerとJekyllをインストール</a></li>
<li class=" toc-h1">
<a href="#%E3%81%9D%E3%81%AE%E4%BB%96">その他</a>
<ol>
<li class=" toc-h2"><a href="#rbenv%E3%82%92%E4%BD%BF%E3%81%A3%E3%81%9F%E7%90%86%E7%94%B1">rbenvを使った理由</a></li>
</ol>
</li>
</ol>
                        </div>

                        <p>Jekyllを使うための事前作業のインストールの手順メモです。
OSのパッケージ管理ソフトでインストールすると、いろいろバージョン問題が出たときのバージョン切替が難しくなるので、
手動インストールをお勧め。</p>

<h1 id="rbenvのインストール">rbenvのインストール</h1>

<ol>
  <li>必要パッケージをインストール
    <pre><code class="language-bash line-numbers"> sudo apt install -y libssl-dev libreadline-dev zlib1g-dev gcc g++ make
</code></pre>
  </li>
  <li>ダウンロード
    <pre><code class="language-bash line-numbers"> git clone https://github.com/sstephenson/rbenv.git .rbenv
 git clone https://github.com/sstephenson/ruby-build.git ~/.rbenv/plugins/ruby-build
</code></pre>
  </li>
  <li>環境変数設定<br>
 環境変数設定後、一回Shellを終了して再度入る
    <pre><code class="language-bash line-numbers"> echo "# For rbenv" &gt;&gt; ~/.bashrc
 echo 'export PATH="$HOME/.rbenv/bin:$PATH"' &gt;&gt; ~/.bashrc
 echo 'eval "$(~/.rbenv/bin/rbenv init -)"' &gt;&gt; ~/.bashrc
</code></pre>
  </li>
</ol>

<h1 id="rubyをインストール">Rubyをインストール</h1>
<ol>
  <li>インストール可能のバージョン表示：
    <pre><code class="language-bash line-numbers"> rbenv install -l
</code></pre>
    <p>結果：</p>
    <pre><code class="language-bash line-numbers"> 2.6.8
 2.7.4
 3.0.2
 jruby-9.2.19.0
 mruby-3.0.0
 rbx-5.0
 truffleruby-21.2.0.1
 truffleruby+graalvm-21.2.0

 Only latest stable releases for each Ruby implementation are shown.
 Use 'rbenv install --list-all / -L' to show all local versions.
</code></pre>
  </li>
  <li>インストール：
    <pre><code class="language-bash line-numbers"> rbenv install 2.7.4
 rbenv rehash
 rbenv global 2.7.4
</code></pre>
    <p>インストール後、gemもインストールされる</p>
  </li>
</ol>

<h1 id="bundlerとjekyllをインストール">bundlerとJekyllをインストール</h1>

<pre><code class="language-bash line-numbers">gem install bundler jekyll
</code></pre>
<p>インストール後、一回シェルを終了して再度入るとPATHが通ることになる。</p>

<h1 id="その他">その他</h1>

<h2 id="rbenvを使った理由">
<code>rbenv</code>を使った理由</h2>

<ul>
  <li>
<code>jekyll server</code>時、下記警告がでる。
    <pre><code class="language-bash line-numbers">  Warning: the running version of Bundler (2.1.2) is older than the version that created the lockfile (2.2.27). We suggest you to upgrade to the version that created the lockfile by running `gem install bundler:2.2.27`.
</code></pre>
  </li>
  <li>調べたら、<code>gem update --system</code> を実行してくれっと記載があるが、<code>gem update --system</code> を実行後、エラー
    <pre><code class="language-bash line-numbers">  Loading the rubygems/defaults/operating_system.rb file caused an error. This file is owned by your OS, not by rubygems upstream. Please find out which OS package this file belongs to and follow the guidelines from your OS to report the problem and ask for help.
</code></pre>
    <p>↓<br>
  <a href="https://github.com/rubygems/rubygems/issues/4186" title="Ruby github issue">ここ</a> によると、
  Debian系のパッケージ・リポジトリのRubyを使っているからだ</p>
    <blockquote>
      <p>Unfortunately, updating rubygems of a ruby installation provided by Debian is not supported</p>
    </blockquote>
  </li>
</ul>

                    </div>
                    <div class="meta-box">
                        <p class="meta meta-u">
                            
                            
                            
                            



<span class="category items" itemprop="keywords">
    
    
    
    
    <i class="fas fa-folder-open"></i>
    <a href="/category/web/">Web関連</a>
    
    
</span>
                            <span class="tags items" itemprop="keywords">

    
    
    <span class="first-item">
        <i class="fas fa-tags"></i>
        <a href="/tag/rbenv/">rbenv</a>
    </span>
    
    
    
    <span class="break">,</span>
    <a href="/tag/Ruby/">Ruby</a>
    
    
    
    <span class="break">,</span>
    <a href="/tag/Jekyll/">Jekyll</a>
    
    
</span>
                        </p>
                    </div>
                </div>
            </div>
        </article>
    </main>
    <div id="right-side">
    <div id="side-fixed">
        <div class="title ">
            <a href="/">HOME</a>
        </div>
        

        
        

<div class="category-lv1 ">
    <a href="/category/linux">Linux(4)</a>
</div>


        
        
        

<div class="category-lv1 ">
    <a href="/category/kernel">カーネル(5)</a>
</div>


        
        
        

<div class="category-lv1 ">
    <a href="/category/network">ネットワーク(2)</a>
</div>


        
        
        

<div class="category-lv1 current">
    <a href="/category/web">Web関連(3)</a>
</div>


        
        
        

<div class="category-lv1 ">
    <a href="/category/others">その他(9)</a>
</div>


        
        

<div class="category-lv2 ">
    <a href="/category/others/windows">Windows(1)</a>
</div>


        
        
        

<div class="category-lv2 ">
    <a href="/category/others/tools">ツール(2)</a>
</div>


        
        
        

<div class="category-lv2 ">
    <a href="/category/others/devtips">開発Tips(4)</a>
</div>


        
        
        

<div class="category-lv2 ">
    <a href="/category/others/bash">シェル(2)</a>
</div>


        
        
        
    </div>
</div>
<!--/#right-side-->
</div>
    </div>
    <button onclick="goToTopFunction()" id="goToTopBtn" title="Go to top">Top</button>
    <script type="text/javascript" src="/assets/main.js"></script>

    <div id="footer" itemscope="" itemtype="https://schema.org/WPFooter">
    <footer>
        <div id="copyright">
            <p class="copy">Copyright © <span itemprop="copyrightYear">2021</span> <span itemprop="copyrightHolder name">Libmuy</span> All Rights Reserved.</p>
        </div>
    </footer>
</div>
</body>

</html>
